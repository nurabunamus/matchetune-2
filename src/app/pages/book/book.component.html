<main *ngIf="book">
  <section class="book_details_container">
    <div class="book_cover">
      <img [src]="book.cover" alt="book cover" />
    </div>
    <div class="book_details">
      <div class="title">
        <span>{{ book.title }}</span>
      </div>
      <div class="description">
        <span>{{ book.description }}</span>
      </div>
      <div *ngIf="viewBook" class="view_book">
        <div *ngIf="!loadedBook" class="loader_book">
          <p-progressSpinner></p-progressSpinner>
        </div>
        <div class="close" (click)="viewPDF()">
          <i class="pi pi-arrow-left"></i>
        </div>
        <div class="content_view">
          <ngx-doc-viewer
            [url]="book.file"
            viewer="google"
            (loaded)="isLoadedBook()"
            class="viewer"
          ></ngx-doc-viewer>
        </div>
      </div>
      <div class="buttons_container" *ngIf="isShowDownload">
        <button (click)="viewPDF()" class="button_style" id="view_book">
          View book &nbsp;&nbsp; <i class="pi pi-eye"></i>
        </button>
        <a
          class="button_style a"
          target="_blank"
          id="download"
          download
          [href]="book.file"
        >
          Download &nbsp;&nbsp;<i class="pi pi-download"></i>
        </a>
      </div>
      <div class="paid_buttons_container" *ngIf="!isShowDownload">
        <button routerLink="/signup/patient" class="get_access_button">
          Get Access &nbsp;&nbsp; <i class="pi pi-angle-right"></i>
        </button>
      </div>
    </div>
  </section>

  <section class="warning_message" *ngIf="!isShowDownload">
    <span class="message"
      >You do not currently have access to this article.</span
    >
  </section>

  <section class="recommended">
    <div class="title_logo">
      <svg
        class="logo"
        width="53"
        height="47"
        viewBox="0 0 53 47"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M13.8854 35.9838C14.6737 36.3512 15.431 36.7159 16.4047 37.1573C16.4789 32.5566 16.5531 28.1395 16.6273 23.5936C15.6578 23.8221 14.749 24.2186 13.9531 24.7603C13.1573 25.3019 12.4903 25.978 11.9905 26.7494C10.2316 29.4638 10.5161 32.1316 12.5655 34.7966C11.7185 34.9885 10.9334 35.2271 10.108 35.345C6.74305 35.8621 3.28216 35.2281 0.423381 33.571C0.261663 33.506 0.134282 33.3884 0.067549 33.2425C0.000815955 33.0965 -0.000142729 32.9334 0.0648322 32.7869C1.3013 28.241 4.41616 25.236 9.40943 23.7718C9.62891 23.706 9.85149 23.6292 10.1204 23.5415C9.19307 23.2262 8.32749 22.9931 7.51451 22.6477C3.53308 20.9094 1.02307 18.1127 0.0431729 14.2578C-0.0310152 13.9699 -0.0433678 13.7505 0.287387 13.5668C4.07407 11.4227 8.08023 10.9703 12.343 12.2453C12.3945 12.2676 12.444 12.2933 12.4913 12.322C10.5346 14.8582 10.2038 17.5123 11.938 20.2376C12.4331 21.0176 13.0979 21.7026 13.8939 22.2528C14.6899 22.803 15.6011 23.2075 16.5747 23.4428C16.7108 18.9517 16.8437 14.5374 16.1822 10.0217C15.7123 10.2026 15.3197 10.3397 14.9457 10.5125C14.5717 10.6852 14.2317 10.9045 13.8267 11.1239C13.3409 10.0473 13.0589 8.90685 12.9921 7.74871C12.7866 5.15011 13.5466 2.56336 15.1559 0.384231C15.3661 0.110051 15.5392 -0.0352654 15.9813 0.0579559C21.2177 1.15468 24.6366 3.97051 26.2687 8.50271C26.3305 8.64803 26.3923 8.79608 26.4912 9.05107C26.6273 8.6919 26.7107 8.4424 26.8004 8.19015C28.4964 3.81423 31.8853 1.09801 36.9672 0.0415057C37.1047 -0.00972024 37.2588 -0.0136689 37.3994 0.0304358C37.54 0.0745404 37.657 0.163532 37.7276 0.280041C40.1264 3.62322 40.623 7.17385 39.2176 10.932C39.1994 10.9743 39.1696 11.012 39.131 11.0416C38.2933 10.655 37.4587 10.2794 36.5252 9.84346C35.8482 14.4607 35.9347 18.9298 36.1047 23.4099C40.2964 22.8999 44.5993 17.4081 40.4324 12.2151C41.3597 12.0122 42.2531 11.7627 43.1495 11.6476C46.4012 11.2049 49.7231 11.8308 52.491 13.4078C52.6749 13.4731 52.8221 13.6004 52.9004 13.7617C52.9786 13.9231 52.9815 14.1055 52.9084 14.2687C51.6719 18.8421 48.5096 21.8306 43.4927 23.292C43.3103 23.3469 43.1125 23.4017 42.7817 23.4922C43.3999 23.6786 43.8883 23.8102 44.3674 23.972C48.9764 25.565 51.8141 28.5234 52.9578 32.7759C53.0143 32.9097 53.0141 33.0571 52.9572 33.1907C52.9003 33.3244 52.7907 33.4352 52.6487 33.5025C48.9115 35.5945 44.9393 36.0249 40.7384 34.8268C40.6535 34.7947 40.571 34.7581 40.4912 34.7171C42.4077 32.2495 42.7539 29.6475 41.1681 26.966C40.1233 25.2113 37.9842 23.7992 36.1016 23.5634C36.1016 24.4792 36.1016 25.3895 36.1016 26.3053C36.1511 29.25 36.1882 32.1919 36.25 35.1366C36.25 35.6548 36.3242 36.1785 36.3366 36.6967C36.3613 37.0668 36.5592 37.1326 36.8899 36.9709C37.6411 36.6446 38.4015 36.3074 39.1897 35.9564C39.7393 37.2726 40.0178 38.6656 40.012 40.0691C40.0237 42.396 39.2718 44.6757 37.8482 46.6303C37.7725 46.7745 37.6376 46.8877 37.471 46.9468C37.3044 47.0059 37.1187 47.0064 36.9517 46.9483C31.7276 45.8351 28.3212 42.9946 26.7107 38.4487C26.6643 38.3226 26.6025 38.1937 26.5283 38.0182C26.1821 38.8134 25.9101 39.5619 25.5453 40.2638C23.6133 43.8281 20.4418 46.0599 16.0925 46.9593C15.9318 47.0133 15.7544 47.0136 15.5934 46.9601C15.4325 46.9066 15.2989 46.803 15.2178 46.6686C12.8839 43.3785 12.4048 39.9046 13.7185 36.2086C13.7399 36.1405 13.7733 36.0757 13.8174 36.0167C13.8484 36.0058 13.8854 35.9893 13.8854 35.9838ZM26.5345 32.1261C26.8614 33.1703 27.4475 34.1365 28.2497 34.9539C29.052 35.7713 30.0502 36.4192 31.1712 36.8502C31.1094 31.9506 31.0476 27.1799 30.9858 22.4119C30.924 22.4119 30.8621 22.3954 30.8034 22.3899C29.3258 24.3449 27.8514 26.3025 26.3398 28.315C24.8282 26.286 23.3661 24.3339 21.9163 22.3899L21.6937 22.4283V36.9215C24.1234 36.0441 25.6937 34.4649 26.5345 32.1261ZM26.0028 35.2655C22.7324 38.4816 18.8715 39.1287 14.4851 37.4397C14.4448 37.5005 14.4117 37.5648 14.3862 37.6316C13.6585 40.3847 14.165 43.2809 15.7989 45.709C15.9967 46.0216 16.244 45.9832 16.5624 45.9119C22.5407 44.3792 25.3413 40.2473 26.0028 35.2655ZM39.842 23.0809C40.655 22.9219 41.4896 22.782 42.3149 22.6011C47.131 21.5409 50.2768 18.906 51.7523 14.6964C51.9007 14.2934 51.7925 14.0932 51.3844 13.8904C49.6839 13.0448 47.7883 12.5544 45.8419 12.4564C44.6154 12.3791 43.3833 12.4971 42.2036 12.8046C44.1109 16.7309 43.3721 20.117 39.8451 23.0809H39.842ZM38.5901 37.4123C34.1635 39.104 30.3397 38.4652 27.06 35.3313C27.1805 36.0441 27.3289 36.7323 27.5144 37.4178C28.7076 41.7581 31.6813 44.604 36.5128 45.9009C36.9425 46.0161 37.131 45.9009 37.335 45.5938C38.2667 44.1622 38.8215 42.5622 38.9579 40.9136C39.0863 39.7365 38.9626 38.5486 38.5931 37.4123H38.5901ZM38.5653 9.60492C38.6271 9.41574 38.6889 9.26219 38.7229 9.10865C39.2953 6.53612 38.8257 3.86696 37.3969 1.57143C37.1156 1.10806 36.8312 0.992906 36.2655 1.15741C32.012 2.36107 29.1744 4.83144 27.7957 8.59045C27.4402 9.58298 27.2423 10.6194 26.9734 11.6393C30.3304 8.55481 34.1418 7.91323 38.5684 9.60492H38.5653ZM14.4233 9.62137C18.8468 7.92145 22.6582 8.56029 25.9534 11.7326C25.9734 11.5924 25.9734 11.4505 25.9534 11.3103C25.7679 10.5646 25.6102 9.80233 25.3753 9.06479C24.0739 5.03159 21.1466 2.39397 16.6366 1.14645C16.1822 1.02033 15.8731 1.05871 15.666 1.48918C15.4063 2.05125 15.0477 2.5859 14.8159 3.13426C13.9291 5.20818 13.793 7.47565 14.4264 9.62137H14.4233ZM10.8561 34.2346C8.90246 30.3046 9.69275 26.9048 13.227 24.035C13.1847 24.0145 13.1402 23.998 13.0941 23.9857C12.3553 24.1283 11.6288 24.2599 10.9055 24.4052C6.07401 25.4142 2.86849 27.9969 1.34145 32.1946C1.14361 32.743 1.30439 32.987 1.84535 33.2365C3.35861 33.9653 5.0237 34.4122 6.73862 34.5499C8.12119 34.6804 9.51919 34.5733 10.8561 34.2346ZM39.7184 23.9857C41.4989 25.3209 42.6302 26.8481 43.0599 28.7455C43.4815 30.6205 43.1536 32.5672 42.1325 34.251C42.8589 34.3497 43.4834 34.4594 44.1109 34.5252C46.703 34.7527 49.308 34.2232 51.5297 33.0172C51.6189 32.9511 51.6882 32.8664 51.7314 32.7707C51.7745 32.675 51.7902 32.5712 51.777 32.4688C50.0614 26.9578 45.2052 24.5368 39.7122 23.9747L39.7184 23.9857ZM13.3507 23.0754C11.6369 21.9111 10.4467 20.2434 9.99348 18.3713C9.54031 16.4992 9.8538 14.5451 10.8777 12.8594C10.6923 12.8046 10.6181 12.7772 10.5439 12.7635C7.5154 12.1503 4.33763 12.5723 1.64438 13.9452C1.55618 13.9716 1.47546 14.0146 1.40763 14.0712C1.3398 14.1278 1.28645 14.1966 1.25126 14.2731C1.21608 14.3495 1.19989 14.4318 1.20372 14.5143C1.20755 14.5968 1.23131 14.6776 1.27345 14.7513C3.10652 20.1444 7.83911 22.4804 13.3445 23.0644L13.3507 23.0754ZM30.5716 10.5865C30.5154 10.5654 30.4616 10.5397 30.4108 10.5097C29.4596 10.9766 28.6243 11.6089 27.9551 12.3688C27.2859 13.1287 26.7963 14.0006 26.5159 14.9322C26.2154 13.9453 25.682 13.0262 24.9509 12.2358C24.2197 11.4455 23.3075 10.802 22.2748 10.3479C22.213 10.3754 22.1635 10.4083 22.1017 10.4357C23.4927 13.8081 24.8818 17.1824 26.2687 20.5584L26.4417 20.542C27.8122 17.2153 29.1867 13.8931 30.5654 10.5755L30.5716 10.5865Z"
          fill="#0C2D04"
          fill-opacity="0.13"
        />
      </svg>
      <span class="recommended_title">Related books</span>
    </div>
    <div class="books_container">
      <app-book-card
        *ngFor="let item of recommendedBooks"
        [book]="item"
      ></app-book-card>
    </div>

    <div class="emptydata" *ngIf="!recommendedBooks.length">
      <span>There is no related books to this book.</span>
      <br />
      <br />
      <span class="link" routerLink="/books"
        >Click here to view other books.</span
      >
    </div>
  </section>
</main>

<div *ngIf="!book" class="loader">
  <p-progressSpinner></p-progressSpinner>
</div>
<section *ngIf="book" class="footer">
  <app-footer> </app-footer>
</section>
